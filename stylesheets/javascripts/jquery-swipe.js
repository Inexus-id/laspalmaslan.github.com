(function(e){function b(t){return t&&t.allowPageScroll===undefined&&(t.swipe!==undefined||t.swipeStatus!==undefined)&&(t.allowPageScroll=u),t||(t={}),t=e.extend({},e.fn.swipe.defaults,t),this.each(function(){var n=e(this),r=n.data(g);r||(r=new w(this,t),n.data(g,r))})}function w(y,b){function q(t){if(st())return;if(e(t.target).closest(b.excludedElements,D).length>0)return;t=t.originalEvent;var n,r=m?t.touches[0]:t;P=h,m?H=t.touches.length:t.preventDefault(),N=0,C=null,_=null,L=0,A=0,O=0,M=1,B=ut();if(!m||H===b.fingers||b.fingers===c||rt()){B[0].start.x=B[0].end.x=r.pageX,B[0].start.y=B[0].end.y=r.pageY,j=tt(),H==2&&(B[1].start.x=B[1].end.x=t.touches[1].pageX,B[1].start.y=B[1].end.y=t.touches[1].pageY,A=O=K(B[0].start,B[1].start));if(b.swipeStatus||b.pinchStatus)n=W(t,P)}else z(t),n=!1;if(n===!1)return P=v,W(t,P),n;ot(!0),D.bind(S,R),D.bind(x,U)}function R(e){e=e.originalEvent;if(P===d||P===v)return;var t,n=m?e.touches[0]:e;B[0].end.x=m?e.touches[0].pageX:n.pageX,B[0].end.y=m?e.touches[0].pageY:n.pageY,F=tt(),C=et(B[0].start,B[0].end),m&&(H=e.touches.length),P=p,H==2&&(A==0?(B[1].start.x=e.touches[1].pageX,B[1].start.y=e.touches[1].pageY,A=O=K(B[0].start,B[1].start)):(B[1].end.x=e.touches[1].pageX,B[1].end.y=e.touches[1].pageY,O=K(B[0].end,B[1].end),_=G(B[0].end,B[1].end)),M=Q(A,O));if(H===b.fingers||b.fingers===c||!m){$(e,C),N=Y(B[0].start,B[0].end),L=J(B[0].start,B[0].end);if(b.swipeStatus||b.pinchStatus)t=W(e,P);if(!b.triggerOnTouchEnd){var r=!V();X()===!0?(P=d,t=W(e,P)):r&&(P=v,W(e,P))}}else P=v,W(e,P);t===!1&&(P=v,W(e,P))}function U(e){e=e.originalEvent;if(e.touches&&e.touches.length>0)return!0;e.preventDefault(),F=tt(),A!=0&&(O=K(B[0].end,B[1].end),M=Q(A,O),_=G(B[0].end,B[1].end)),N=Y(B[0].start,B[0].end),C=et(B[0].start,B[0].end),L=J();if(b.triggerOnTouchEnd||b.triggerOnTouchEnd===!1&&P===p){P=d;var t=it()||!rt(),n=H===b.fingers||b.fingers===c||!m,r=B[0].end.x!==0,i=n&&r&&t;if(i){var s=V(),o=X();if(o!==!0&&o!==null||!s){if(!s||o===!1)P=v,W(e,P)}else W(e,P)}else P=v,W(e,P)}else P===p&&(P=v,W(e,P));D.unbind(S,R,!1),D.unbind(x,U,!1),ot(!1)}function z(){H=0,F=0,j=0,A=0,O=0,M=1,ot(!1)}function W(e,u){var a=undefined;b.swipeStatus&&(a=b.swipeStatus.call(D,e,u,C||null,N||0,L||0,H)),b.pinchStatus&&it()&&(a=b.pinchStatus.call(D,e,u,_||null,O||0,L||0,H,M)),u===v&&b.click&&(H===1||!m)&&(isNaN(N)||N===0)&&(a=b.click.call(D,e,e.target));if(u==d){b.swipe&&(a=b.swipe.call(D,e,C,N,L,H));switch(C){case t:b.swipeLeft&&(a=b.swipeLeft.call(D,e,C,N,L,H));break;case n:b.swipeRight&&(a=b.swipeRight.call(D,e,C,N,L,H));break;case r:b.swipeUp&&(a=b.swipeUp.call(D,e,C,N,L,H));break;case i:b.swipeDown&&(a=b.swipeDown.call(D,e,C,N,L,H))}switch(_){case s:b.pinchIn&&(a=b.pinchIn.call(D,e,_||null,O||0,L||0,H,M));break;case o:b.pinchOut&&(a=b.pinchOut.call(D,e,_||null,O||0,L||0,H,M))}}return(u===v||u===d)&&z(e),a}function X(){return b.threshold!==null?N>=b.threshold:null}function V(){var e;return b.maxTimeThreshold?L>=b.maxTimeThreshold?e=!1:e=!0:e=!0,e}function $(e,s){if(b.allowPageScroll===u||rt())e.preventDefault();else{var o=b.allowPageScroll===a;switch(s){case t:(b.swipeLeft&&o||!o&&b.allowPageScroll!=f)&&e.preventDefault();break;case n:(b.swipeRight&&o||!o&&b.allowPageScroll!=f)&&e.preventDefault();break;case r:(b.swipeUp&&o||!o&&b.allowPageScroll!=l)&&e.preventDefault();break;case i:(b.swipeDown&&o||!o&&b.allowPageScroll!=l)&&e.preventDefault()}}}function J(){return F-j}function K(e,t){var n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return Math.round(Math.sqrt(n*n+r*r))}function Q(e,t){var n=t/e*1;return n.toFixed(2)}function G(){return M<1?o:s}function Y(e,t){return Math.round(Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)))}function Z(e,t){var n=e.x-t.x,r=t.y-e.y,i=Math.atan2(r,n),s=Math.round(i*180/Math.PI);return s<0&&(s=360-Math.abs(s)),s}function et(e,s){var o=Z(e,s);return o<=45&&o>=0?t:o<=360&&o>=315?t:o>=135&&o<=225?n:o>45&&o<135?i:r}function tt(){var e=new Date;return e.getTime()}function nt(){D.unbind(E,q),D.unbind(T,z),D.unbind(S,R),D.unbind(x,U),ot(!1)}function rt(){return b.pinchStatus||b.pinchIn||b.pinchOut}function it(){return _&&rt()}function st(){return D.data(g+"_intouch")===!0?!0:!1}function ot(e){e=e===!0?!0:!1,D.data(g+"_intouch",e)}function ut(){var e=[];for(var t=0;t<=5;t++)e.push({start:{x:0,y:0},end:{x:0,y:0},delta:{x:0,y:0}});return e}var w=m||!b.fallbackToMouseEvents,E=w?"touchstart":"mousedown",S=w?"touchmove":"mousemove",x=w?"touchend":"mouseup",T="touchcancel",N=0,C=null,L=0,A=0,O=0,M=1,_=0,D=e(y),P="start",H=0,B=null,j=0,F=0;try{D.bind(E,q),D.bind(T,z)}catch(I){e.error("events not supported "+E+","+T+" on jQuery.swipe")}this.enable=function(){return D.bind(E,q),D.bind(T,z),D},this.disable=function(){return nt(),D},this.destroy=function(){return nt(),D.data(g,null),D}}var t="left",n="right",r="up",i="down",s="in",o="out",u="none",a="auto",f="horizontal",l="vertical",c="all",h="start",p="move",d="end",v="cancel",m="ontouchstart"in window,g="TouchSwipe",y={fingers:1,threshold:75,maxTimeThreshold:null,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,triggerOnTouchEnd:!0,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"button, input, select, textarea, a, .noSwipe"};e.fn.swipe=function(t){var n=e(this),r=n.data(g);if(r&&typeof t=="string"){if(r[t])return r[t].apply(this,Array.prototype.slice.call(arguments,1));e.error("Method "+t+" does not exist on jQuery.swipe")}else if(!r&&(typeof t=="object"||!t))return b.apply(this,arguments);return n},e.fn.swipe.defaults=y,e.fn.swipe.phases={PHASE_START:h,PHASE_MOVE:p,PHASE_END:d,PHASE_CANCEL:v},e.fn.swipe.directions={LEFT:t,RIGHT:n,UP:r,DOWN:i,IN:s,OUT:o},e.fn.swipe.pageScroll={NONE:u,HORIZONTAL:f,VERTICAL:l,AUTO:a},e.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:c}})(jQuery);