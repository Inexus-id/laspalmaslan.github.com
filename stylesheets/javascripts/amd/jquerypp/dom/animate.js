/*
* jQuery++ - 1.0.0 (2012-11-23)
* http://jquerypp.com
* Copyright (c) 2012 Bitovi
* Licensed MIT
*/
define(["jquery","jquerypp/dom/styles"],function(e){var t=0,n=null,r=[],i=null,s=e.fn.animate,o=function(){if(!n){var e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("media","screen"),document.getElementsByTagName("head")[0].appendChild(e),window.createPopup||e.appendChild(document.createTextNode("")),n=e.sheet}return n},u=function(e,t){for(var n=e.cssRules.length-1;n>=0;n--){var r=e.cssRules[n];if(r.type===7&&r.name==t){e.deleteRule(n);return}}},a=function(t,n){var r=!this[0]||!this[0].nodeType,i=!r&&e(this).css("display")==="inline"&&e(this).css("float")==="none";for(var s in t)if(t[s]=="show"||t[s]=="hide"||t[s]=="toggle"||e.isArray(t[s])||t[s]<0||s=="zIndex"||s=="z-index"||s=="scrollTop"||s=="scrollLeft")return!0;return t.jquery===!0||l()===null||e.isEmptyObject(t)||n&&n.length==4||n&&typeof n[2]=="string"||e.isPlainObject(n)||i||r},f=function(t,n){return typeof n=="number"&&!e.cssNumber[t]?n+="px":n},l=function(){if(!i){var e,t=document.createElement("fakeelement"),n={transition:{transitionEnd:"transitionEnd",prefix:""},MozTransition:{transitionEnd:"animationend",prefix:"-moz-"},WebkitTransition:{transitionEnd:"webkitAnimationEnd",prefix:"-webkit-"}};for(e in n)t.style[e]!==undefined&&(i=n[e])}return i},c={top:function(e){return e.position().top},left:function(e){return e.position().left},width:function(e){return e.width()},height:function(e){return e.height()},fontSize:function(e){return"1em"}},h=function(t){var n={};return e.each(t,function(e,t){n[l().prefix+e]=t}),n},p=function(n){var i,s,a;return e.each(r,function(e,t){n===t.style?(s=t.name,t.age=0):t.age+=1}),s||(i=o(),s="jquerypp_animation_"+t++,i.insertRule("@"+l().prefix+"keyframes "+s+" "+n,i.cssRules&&i.cssRules.length||0),r.push({name:s,style:n,age:0}),r.sort(function(e,t){return e.age-t.age}),r.length>20&&(a=r.pop(),u(i,a.name))),s};return e.fn.animate=function(t,n,r,i){if(a.apply(this,arguments))return s.apply(this,arguments);var o=jQuery.speed(n,r,i);return this.queue(o.queue,function(n){var r,i=[],s="",u,a=e(this),d=o.duration,v,m,g="{ from {",y=function(t,n){a.css(t),a.css(h({"animation-duration":"","animation-name":"","animation-fill-mode":"","animation-play-state":""})),e.isFunction(o.old)&&n&&o.old.call(a[0],!0),e.removeData(a,m,!0)},b=function(){y(t,!0),n()};for(u in t)i.push(u);l().prefix==="-moz-"&&e.each(i,function(t,n){var r=c[e.camelCase(n)];r&&a.css(n)=="auto"&&a.css(n,r(a))}),r=a.styles.apply(a,i),e.each(i,function(e,n){var i=n.replace(/([A-Z]|^ms)/g,"-$1").toLowerCase();g+=i+" : "+f(n,r[n])+"; ",s+=i+" : "+f(n,t[n])+"; "}),g+="} to {"+s+" }}",v=p(g),m=v+".run",e._data(this,m,{stop:function(e){a.css(h({"animation-play-state":"paused"})),a.off(l().transitionEnd,b),e?y(t,!0):y(a.styles.apply(a,i),!1)}}),a.css(h({"animation-duration":d+"ms","animation-name":v,"animation-fill-mode":"forwards"})),a.one(l().transitionEnd,b)}),this},e});